<!DOCTYPE html>
<html>
  <head></head>
  <body>
    <div id="container">
      <h1>Ayurvedic Yoga Massage</h1>
      <p>Hi <span id="name">-name-</span></p>
      <p>
        Here are your details for the ayurvedic yoga massage intensive training
        course at <span id="place">-place-</span> on
        <span id="date">-date-</span>.
      </p>
      <!-- TODO times?--><iframe class="map" id="map"></iframe>
      <p>
        Prices are &pound;550 for individuals, with a &pound;100 deposit
        requested two weeks before the start date // (so that will be
        <span id="fortnite">-fortnight-</span>).
      </p>
      <p>
        clicking on any of the buttons below will take you securely to payPal
      </p>
      <a
        href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=B2JF5URJQTFRJ"
        ><button>pay full amount &pound;550</button></a
      ><a
        href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=W4CAJ3UG4HMQ4"
        ><button>pay deposit &pound;100</button></a
      ><a
        href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=PTJ58KCWFALEU"
        ><button>pay remainder &pound;450</button></a
      >
      <script>
        main();

        function main() {
          const details = getDetails();
          replaceSpans(details);
        }

        function getDetails() {
          // populate and return details array with url query string parameters
          const details = [];
          const urlParams = new URLSearchParams(window.location.search);
          for (let p of urlParams) {
            details[p[0]] = p[1]; // key = value
          }
          return details;
        }

        function replaceSpans(details) {
          const doc = document;
          for (let d in details) {
            // d is name, details[d] is freddy
            // find span called d, and replace with details[d]
            if (doc.getElementById(d)) {
              doc.getElementById(d).innerHTML = details[d];
            }
          }
          doc.getElementById("map").src = details["mapRef"];
        }
      </script>
    </div>
  </body>
</html>
